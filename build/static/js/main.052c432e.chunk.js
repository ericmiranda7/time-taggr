(this["webpackJsonptime-taggr"]=this["webpackJsonptime-taggr"]||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(18),c=n.n(r),i=n(10),s=n(77),l=n(136),u=n(138),o=n(135),d=n(39),j=n(1),b=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(j.jsxs)(l.a,{bg:"dark",expand:"lg",variant:"dark",onToggle:function(){return r(!n)},expanded:n,children:[Object(j.jsx)(l.a.Brand,{href:"#home",children:"Time-Taggr"}),Object(j.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(j.jsxs)(u.a,{className:"me-auto nav",id:"navbar",children:[Object(j.jsx)(d.b,{to:"/",className:"nav-link",onClick:function(){return r(!n)},children:"Home"}),Object(j.jsx)(d.b,{to:"/settings",className:"nav-link",onClick:function(){return r(!n)},children:"Settings"}),Object(j.jsxs)(o.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(j.jsx)(o.a.Item,{href:"#action/3.1",children:"Action"}),Object(j.jsx)(o.a.Item,{href:"#action/3.2",children:"Another action"}),Object(j.jsx)(o.a.Item,{href:"#action/3.3",children:"Something"}),Object(j.jsx)(o.a.Divider,{}),Object(j.jsx)(o.a.Item,{href:"#action/3.4",children:"Separated link"})]})]})})]})},m=n(14),p=n(8),O={startTime:null,running:!1,duration:null,diff:null,hours:null,minutes:null,seconds:null,completedTime:0,expired:null,stopped:null,pause:null},f=null,x=function(e){return{type:"SET_DURATION",payload:{duration:60*e.duration}}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DURATION":var n,a=(null===(n=t.payload)||void 0===n?void 0:n.duration)||e.duration,r=a/3600|0,c=(a/60|0)%60,i="00";return c=c<10?"0"+c:c,r=r<10?"0"+r:r,Object(p.a)(Object(p.a)({},e),{},{duration:a,hours:r,minutes:c,seconds:i,running:!1});case"START_TIMER":var s=Date.now();return Object(p.a)(Object(p.a)({},e),{},{startTime:s,running:!0});case"TICK":var l=e.duration-((Date.now()-e.startTime)/1e3|0),u=l/3600|0,o=(l/60|0)%60,d=l%60|0;u=u<10?"0"+u:u,o=o<10?"0"+o:o,d=d<10?"0"+d:d;var j,b=!1;return l<=0&&(b=!0,clearInterval(f),j=e.duration),Object(p.a)(Object(p.a)({},e),{},{diff:l,hours:u,minutes:o,seconds:d,completedTime:j,expired:b});case"STOP_TIMER":var m=e.duration-e.diff;return Object(p.a)(Object(p.a)({},e),{},{completedTime:m,stopped:!0,running:!1,pause:null});case"PAUSE_TIMER":return clearInterval(f),Object(p.a)(Object(p.a)({},e),{},{pause:Date.now(),running:!1});case"RESUME_TIMER":var x=Date.now()-e.pause+e.startTime;return Object(p.a)(Object(p.a)({},e),{},{startTime:x,running:!0});case"CONSUME_COMPLETED_TIME":return Object(p.a)(Object(p.a)({},e),{},{expired:!1,stopped:!1});default:return e}},v=n(41),g=n(25),T=n.n(g),y=n(33),E=n(57),N=n.n(E),I="/api/tags",S={getAll:function(){var e=Object(y.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get(I);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createTag:function(){var e=Object(y.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post(I,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=[{name:"Study",value:"study",color:"blue",isSelected:!0,duration:25,completedTime:0,id:1},{name:"Workout",value:"workout",color:"green",isSelected:!1,duration:25,completedTime:0,id:2},{name:"Break",value:"break",color:"white",isSelected:!1,duration:70,completedTime:0,id:3}],w=function(e){return C(e,"break")},C=function(e,t){return{type:"SET_TAG_DURATION",payload:{duration:e,tagValue:t}}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_TAG":return Object(v.a)(t.payload.tags);case"ADD_TAG":return console.log(t.payload.tag),e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{isSelected:!1})})).concat(t.payload.tag);case"MAKE_SELECTED":return e.map((function(e){return e.value===t.payload.tagValue?Object(p.a)(Object(p.a)({},e),{},{isSelected:!0}):Object(p.a)(Object(p.a)({},e),{},{isSelected:!1})}));case"SET_TAG_DURATION":return"break"===t.payload.tagValue?e.map((function(e){return"break"===e.value?Object(p.a)(Object(p.a)({},e),{},{duration:t.payload.duration}):e})):e.map((function(e){return e.isSelected?Object(p.a)(Object(p.a)({},e),{},{duration:t.payload.duration}):e}));case"ADD_COMPLETION":return e.map((function(e){return e.value===t.payload.tagValue?Object(p.a)(Object(p.a)({},e),{},{completedTime:e.completedTime+t.payload.completedTime}):e}));default:return e}},_=n(72),D=function(e){var t=e.timer,n={clock:{height:"350px",width:"350px",display:"flex",justifyContent:"center",alignItems:"center",borderStyle:"solid",borderWidth:"0.5em"},"time-text":{fontSize:"50px"}};return Object(j.jsx)("div",{className:"mx-auto rounded-circle",style:n.clock,children:Object(j.jsxs)("p",{className:"mb-0",style:n["time-text"],children:[t.hours,":",t.minutes,":",t.seconds]})})},M=function(e){var t=e.variant,n=e.text,a=e.handleClick;return Object(j.jsx)(_.a,{variant:t,className:"mx-auto mb-1",onClick:a,style:{width:"175px",display:"block"},children:n})},R=function(e){var t=e.timer,n=e.dispatch,a=e.selectedTag,r=function(){return function(e,t){clearInterval(f),e(x(t)),e({type:"STOP_TIMER"})}(n,a)};return t.running?Object(j.jsxs)("div",{children:[Object(j.jsx)(M,{variant:"primary",text:"Pause",handleClick:function(){return n({type:"PAUSE_TIMER"})}}),Object(j.jsx)(M,{variant:"danger",text:"Stop",handleClick:r})]}):Object(j.jsx)("div",{children:t.pause?Object(j.jsxs)("div",{children:[Object(j.jsx)(M,{variant:"primary",text:"Resume",handleClick:function(){return function(e){e({type:"RESUME_TIMER"}),e({type:"TICK"}),f=setInterval((function(){e({type:"TICK"})}),1e3)}(n)}}),Object(j.jsx)(M,{variant:"danger",text:"Stop",handleClick:r})]}):Object(j.jsx)(M,{variant:"primary",text:"Start",handleClick:function(){return function(e){e({type:"START_TIMER"}),e({type:"TICK"}),f=setInterval((function(){e({type:"TICK"})}),1e3)}(n)}})})},U=function(){var e=Object(m.c)((function(e){return console.log("timer updated"),e.timer}));console.log(e.running);var t=Object(m.c)((function(e){return e.tags.find((function(e){return e.isSelected}))})),n=Object(m.b)();return Object(a.useEffect)((function(){e.running||e.pause||n(x(t||0))}),[n,t,e.pause,e.running]),Object(a.useEffect)((function(){var a,r;(e.expired||e.stopped)&&(n((a=null===t||void 0===t?void 0:t.value,r=e.completedTime,{type:"ADD_COMPLETION",payload:{tagValue:a,completedTime:r}})),n({type:"CONSUME_COMPLETED_TIME"}))}),[n,t,e]),Object(j.jsxs)("div",{children:[Object(j.jsx)(D,{timer:e}),Object(j.jsxs)("div",{className:"align-items-center mt-3",children:[Object(j.jsx)(R,{timer:e,dispatch:n,selectedTag:t}),t.completedTime>0?Object(j.jsxs)("p",{className:"text-center",children:["You have completed ",null===t||void 0===t?void 0:t.completedTime," seconds of ",t.name.toLowerCase()]}):Object(j.jsxs)("p",{className:"text-center",children:["You haven't put in any time on ",t.name.toLowerCase()]})]})]})},P=function(e){var t,n=e.tags;return Object(j.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(j.jsx)("h2",{children:null===(t=n.find((function(e){return e.isSelected})))||void 0===t?void 0:t.name}),Object(j.jsx)(U,{})]})},B=n(137),K=n(139),L=n(76),G={duration:{width:"4em",textAlign:"right"},spanAlignCenter:{alignItems:"center"}},V=function(e){var t=e.selectedTag,n=e.isTimerRunning,a=Object(m.c)((function(e){var t=e.tags.find((function(e){return"break"===e.value}));return{minutes:t.duration%60,hours:t.duration/60|0}})),r={minutes:t.duration%60,hours:t.duration/60|0},c=Object(m.b)(),i=function(e){if(e.target.name.includes("break")){var t=60*Number(e.target.value)+a.minutes;c(w(t))}else{var n=60*Number(e.target.value)+Number(r.minutes);c(C(n))}},s=function(e){if(e.target.name.includes("break")){var t=60*a.hours+Number(e.target.value);c(w(t))}else{var n=Number(e.target.value)+60*Number(r.hours);c(C(n))}e.target.value>59&&(e.target.value="")},l=function(e){return e.target.value=""};return Object(j.jsxs)("div",{className:"d-flex justify-content-end flex-column",children:[Object(j.jsxs)("div",{className:"d-flex flex-row",children:[Object(j.jsx)("span",{className:"d-inline-flex flex-grow-1",style:G.spanAlignCenter,children:"Work"}),Object(j.jsx)("input",{className:"mr-1",disabled:n,type:"number",onChange:i,onBlur:l,style:G.duration,name:"hours",placeholder:r.hours+"H"}),Object(j.jsx)("input",{type:"number",disabled:n,onChange:s,onBlur:l,style:G.duration,name:"minutes",placeholder:r.minutes+"M"})]}),Object(j.jsxs)("div",{className:"d-flex flex-row mt-1",children:[Object(j.jsx)("span",{className:"d-inline-flex flex-grow-1",style:G.spanAlignCenter,children:"Break"}),Object(j.jsx)("input",{className:"mr-1",disabled:n,type:"number",onBlur:l,onChange:i,style:G.duration,name:"breakHours",placeholder:a.hours+"H"}),Object(j.jsx)("input",{type:"number",disabled:n,onChange:s,onBlur:l,style:G.duration,name:"breakMinutes",placeholder:a.minutes+"M"})]})]})},H=function(e){var t=e.isTimerRunning,n=Object(m.b)();return Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("span",{className:"d-inline-flex flex-grow-1",style:G.spanAlignCenter,children:"Add Tag"}),Object(j.jsx)("input",{className:"",style:{width:"8.2em"},onKeyDown:function(e){if("Enter"===e.key){var t={name:e.target.value,color:"gray"};e.target.value="",n(function(e){return function(){var t=Object(y.a)(T.a.mark((function t(n){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.createTag(e);case 2:a=t.sent,n({type:"ADD_TAG",payload:{tag:a}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}},disabled:t})]})},W=function(e){var t=e.options,n=e.dispatch,a=e.isTimerRunning;return Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("span",{className:"d-inline-flex flex-grow-1",style:G.spanAlignCenter,children:"Select Tag"}),Object(j.jsx)("div",{style:{width:"8.2em"},children:Object(j.jsx)(L.a,{options:t,onChange:function(e){n({type:"MAKE_SELECTED",payload:{tagValue:e.value}})},isDisabled:a})})]})},J=function(){var e=Object(m.c)((function(e){return e.tags})),t=e.find((function(e){return e.isSelected})),n=Object(m.c)((function(e){return e.timer.running||e.timer.pause})),a=Object(m.b)(),r=e.map((function(e){return{value:e.value,label:e.name}}));return Object(j.jsx)("div",{className:"d-flex justify-content-center",children:Object(j.jsxs)(B.a,{style:{width:"18rem"},children:[Object(j.jsx)(B.a.Header,{children:"Settings"}),Object(j.jsxs)(K.a,{variant:"flush",children:[Object(j.jsx)(K.a.Item,{children:Object(j.jsx)(V,{selectedTag:t,isTimerRunning:n})}),Object(j.jsx)(K.a.Item,{children:Object(j.jsx)(W,{selectedTag:t,options:r,dispatch:a,isTimerRunning:n})}),Object(j.jsx)(K.a.Item,{children:Object(j.jsx)(H,{isTimerRunning:n})})]})]})})},Y=function(){var e=Object(m.c)((function(e){return e.tags})),t=Object(m.b)();return console.log("app render"),Object(a.useEffect)((function(){t(function(){var e=Object(y.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:n=e.sent,t({type:"INIT_TAG",payload:{tags:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(j.jsxs)("div",{className:"page-div d-flex flex-column",children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{className:"container mt-4 d-flex flex-column align-items-center main",children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/settings",children:Object(j.jsx)(J,{})}),Object(j.jsx)(i.a,{path:"/",children:Object(j.jsx)(P,{tags:e})})]})})]})},z=n(40),q=n(74),F=n(75),Q=Object(z.combineReducers)({timer:h,tags:A}),X=Object(z.createStore)(Q,Object(q.composeWithDevTools)(Object(z.applyMiddleware)(F.a)));n(129);c.a.render(Object(j.jsx)(m.a,{store:X,children:Object(j.jsx)(d.a,{children:Object(j.jsx)(Y,{})})}),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.052c432e.chunk.js.map